<!DOCTYPE html>
<html>
	<head>
		<script src="../../dist/beta.js"></script>
		<script src="http://localhost:5000/socket.io/socket.io.js"></script>
	</head>
	<body>
		<a href="javascript:call()">Call</a>
		<script>
			App = {};
			
			
			
			/* Stub Definition Start */
			
			BetaJS.RMI.Stub.extend("App.Stub", {
			    intf : ["test"]
			});
			
			/* Stub Definition End */
			
			
			
			App.socket = io.connect("http://localhost:5000", { "force new connection" : true });
			
			App.rmi_sender = new BetaJS.Net.SocketSenderChannel(App.socket, "rmi");
			App.rmi_receiver = new BetaJS.Net.SocketReceiverChannel(App.socket, "rmi");
			App.rmi_peer = new BetaJS.RMI.Peer(App.rmi_sender, App.rmi_receiver);
			
			
			
			/* Bind Stub to Sekelton Start */
			
			var stub = App.rmi_peer.acquire(App.Stub, "object_name");
			
			/* Bind Stub to Skeleton End */
			
			
			function call() {
				
				/* Call Stub Start */
				
				stub.test(1, 2, 3).success(function (result) {
				   alert(result); 
				});
				
				/* Call Stub End */
				
			}
		</script>
	</body>
</html>