/*! betajs - v0.0.1 - 2013-09-05, Copyright (c) Oliver Friedmann & Victor Lingenthal, MIT Software License. */BetaJS.Net.Browser={getNavigator:function(){return{appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,platform:navigator.platform,userAgent:navigator.userAgent}},__flash:null,__isiOS:null,__isAndroid:null,__iOSversion:null,__isWebOS:null,__isWindowsPhone:null,__isBlackberry:null,__isMobile:null,__isInternetExplorer:null,flash:function(){return this.__flash||(this.__flash=new BetaJS.Net.FlashDetect),this.__flash},isiOS:function(){return null==this.__isiOS&&(this.__isiOS=-1!=navigator.userAgent.indexOf("iPhone")||-1!=navigator.userAgent.indexOf("iPod")||-1!=navigator.userAgent.indexOf("iPad")),this.__isiOS},isChrome:function(){return"chrome"in window},isAndroid:function(){return null==this.__isAndroid&&(this.__isAndroid=-1!=navigator.userAgent.toLowerCase().indexOf("android")),this.__isAndroid},isWebOS:function(){return null==this.__isWebOS&&(this.__isWebOS=-1!=navigator.userAgent.toLowerCase().indexOf("webos")),this.__isWebOS},isWindowsPhone:function(){return null==this.__isWindowsPhone&&(this.__isWindowsPhone=-1!=navigator.userAgent.toLowerCase().indexOf("windows phone")),this.__isWindowsPhone},isBlackberry:function(){return null==this.__isBlackberry&&(this.__isBlackberry=-1!=navigator.userAgent.toLowerCase().indexOf("blackberry")),this.__isBlackberry},iOSversion:function(){if(null==this.__iOSversion&&this.isiOS()){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);this.__iOSversion={major:parseInt(t[1],10),minor:parseInt(t[2],10),revision:parseInt(t[3]||0,10)}}return this.__iOSversion},isMobile:function(){return null==this.__isMobile&&(this.__isMobile=this.isiOS()||this.isAndroid()||this.isWebOS()||this.isWindowsPhone()||this.isBlackberry()),this.__isMobile},isInternetExplorer:function(){return null==this.__isInternetExplorer&&(this.__isInternetExplorer="Microsoft Internet Explorer"==navigator.appName),this.__isInternetExplorer}},BetaJS.Class.extend("BetaJS.Net.FlashDetect",{constructor:function(){if(this._inherited(BetaJS.Net.FlashDetect,"constructor"),this.__version=null,navigator.plugins&&navigator.plugins.length>0){var t="application/x-shockwave-flash",e=navigator.mimeTypes;e&&e[t]&&e[t].enabledPlugin&&e[t].enabledPlugin.description&&(this.__version=this.parseVersion(e[t].enabledPlugin.description))}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var i=0;this.__activeXDetectRules.length>i;i++)try{var s=new ActiveXObject(this.__activeXDetectRules[i].name),n=this.__activeXDetectRules[i].version(s);if(n){this.__version=this.parseActiveXVersion(n);break}}catch(r){}},parseVersion:function(t){var e=t.split(/ +/),i=e[2].split(/\./),s=e[3];return{raw:t,major:parseInt(i[0],10),minor:parseInt(i[1],10),revisionStr:s,revision:parseInt(s.replace(/[a-zA-Z]/g,""),10)}},parseActiveXVersion:function(t){var e=t.split(",");return{raw:t,major:parseInt(e[0].split(" ")[1],10),minor:parseInt(e[1],10),revision:parseInt(e[2],10),revisionStr:e[2]}},version:function(){return this.__version},installed:function(){return null!=this.__version},supported:function(){return this.installed()&&!BetaJS.Net.Browser.is_iOS()},majorAtLeast:function(t){return this.installed()&&this.version().major>=t},minorAtLeast:function(t){return this.installed()&&this.version().minor>=t},revisionAtLeast:function(t){return this.installed()&&this.version().revision>=t},versionAtLeast:function(){if(!this.installed())return!1;var t=[this.version().major,this.version().minor,this.version().revision],e=Math.min(t.length,arguments.length);for(i=0;e>i;i++)if(t[i]!=arguments[i])return t[i]>arguments[i];return!0},__activeXDetectRules:[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(t){try{return t.GetVariable("$version")}catch(e){return null}}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(t){try{t.AllowScriptAccess="always";try{return t.GetVariable("$version")}catch(e){return null}}catch(e){return"6,0,21"}}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(t){try{return t.GetVariable("$version")}catch(e){return null}}}]}),BetaJS.Net.Browser.Loader={loadScript:function(t,e,i){var s=!1,n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src=t,r.onload=r.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,r.onload=r.onreadystatechange=null,e&&e.apply(i||this,[t]))},n.appendChild(r)}},BetaJS.Templates={tokenize:function(t){if(BetaJS.Types.is_array(t))return t;var e=[],i=0;return t.replace(BetaJS.Templates.SYNTAX_REGEX(),function(s,n,r,_,o){return o>i&&e.push({type:BetaJS.Templates.TOKEN_STRING,data:BetaJS.Strings.js_escape(t.slice(i,o))}),_&&e.push({type:BetaJS.Templates.TOKEN_CODE,data:_}),n&&e.push({type:BetaJS.Templates.TOKEN_EXPR,data:n}),r&&e.push({type:BetaJS.Templates.TOKEN_ESC,data:r}),i=o+s.length,s}),e},compile:function(t,e){BetaJS.Types.is_string(t)&&(t=this.tokenize(t)),e=e||{};for(var i=e.start_index||0,s=e.end_index||t.length,n="__p+='",r=i;s>r;++r)switch(t[r].type){case BetaJS.Templates.TOKEN_STRING:n+=t[r].data;break;case BetaJS.Templates.TOKEN_CODE:n+="';\n"+t[r].data+"\n__p+='";break;case BetaJS.Templates.TOKEN_EXPR:n+="'+\n((__t=("+t[r].data+"))==null?'':__t)+\n'";break;case BetaJS.Templates.TOKEN_ESC:n+="'+\n((__t=("+t[r].data+"))==null?'':BetaJS.Strings.htmlentities(__t))+\n'"}n+="';\n",n="with(obj||{}){\n"+n+"}\n",n="var __t,__p='',__j=Array.prototype.join,echo=function(){__p+=__j.call(arguments,'');};\n"+n+"return __p;\n";var _=Function("obj",n),o=function(t){return _.call(this,t)};return o.source="function(obj){\n"+n+"}",o}},BetaJS.Templates.SYNTAX={OPEN:"{%",CLOSE:"%}",MODIFIER_CODE:"",MODIFIER_EXPR:"=",MODIFIER_ESC:"-"},BetaJS.Templates.SYNTAX_REGEX=function(){var t=BetaJS.Templates.SYNTAX;return BetaJS.Templates.SYNTAX_REGEX_CACHED||(BetaJS.Templates.SYNTAX_REGEX_CACHED=RegExp(t.OPEN+t.MODIFIER_EXPR+"([\\s\\S]+?)"+t.CLOSE+"|"+t.OPEN+t.MODIFIER_ESC+"([\\s\\S]+?)"+t.CLOSE+"|"+t.OPEN+t.MODIFIER_CODE+"([\\s\\S]+?)"+t.CLOSE+"|"+"$","g")),BetaJS.Templates.SYNTAX_REGEX_CACHED},BetaJS.Templates.TOKEN_STRING=1,BetaJS.Templates.TOKEN_CODE=2,BetaJS.Templates.TOKEN_EXPR=3,BetaJS.Templates.TOKEN_ESC=4,BetaJS.Class.extend("BetaJS.Templates.Template",{constructor:function(t){this._inherited(BetaJS.Templates.Template,"constructor"),this.__tokens=BetaJS.Templates.tokenize(t),this.__compiled=BetaJS.Templates.compile(this.__tokens)},evaluate:function(t){return this.__compiled.apply(this,[t])}},{bySelector:function(t){return new this(BetaJS.$(t).html())}}),BetaJS.$=jQuery||null,BetaJS.Class.extend("BetaJS.Views.View",[BetaJS.Events.EventsMixin,BetaJS.Events.ListenMixin,BetaJS.Ids.ClientIdMixin,BetaJS.Properties.PropertiesMixin,{_templates:function(){return{}},_dynamics:function(){return{}},_events:function(){return[]},_css:function(){return{}},css:function(t){if(this.__css[t])return this.__css[t];if(this.__parent){var e=this.__parent.css(t);if(e&&e!=t)return e}var e=this._css();return e[t]?e[t]:t},_render:function(){this.__html?this.$el.html(this.__html):this.__templates["default"]?this.$el.html(this.evaluateTemplate("default",{})):this.__dynamics["default"]&&this.evaluateDynamics("default",this.$el,{},{name:"default"})},templates:function(t){return t in this.__templates?this.__templates[t]:null},dynamics:function(t){return t in this.__dynamics?this.__dynamics[t]:null},_supp:function(){return{__context:this,css:function(t){return this.__context.css(t)},attrs:function(t){var e="";for(var i in t)e+=(null==t[i]?i:i+"='"+t[i]+"'")+" ";return e},styles:function(t){var e="";for(var i in t)e+=i+":"+t[i]+";";return e},selector:function(t){return"data-selector='"+t+"' "}}},templateArguments:function(){var t=this.getAll();return t.supp=this._supp(),t},evaluateTemplate:function(t,e){return e=e||{},this.__templates[t].evaluate(BetaJS.Objs.extend(e,this.templateArguments()))},evaluateDynamics:function(t,e,i,s){return this.__dynamics[t].renderInstance(e,BetaJS.Objs.extend(s||{},{args:i||{}}))},_setOption:function(t,e,i,s){var s=s?s:"__";this[s+e]=e in t&&BetaJS.Types.is_defined(t[e])?t[e]:i},_setOptionProperty:function(t,e,i){this.set(e,e in t&&BetaJS.Types.is_defined(t[e])?t[e]:i)},constructor:function(t){t=t||{},this._inherited(BetaJS.Views.View,"constructor"),this._setOption(t,"el",null),this._setOption(t,"visible",!0),this._setOption(t,"html",null),this._setOption(t,"events",[]),this._setOption(t,"attributes",{}),this._setOption(t,"hide_on_leave",!1),this._setOption(t,"vertical_center",!1),this._setOption(t,"horizontal_center",!1),this._setOption(t,"invalidate_on_show",!1),this._setOption(t,"append_to_el",!1),this.__old_attributes={},this._setOption(t,"el_classes",[]),BetaJS.Types.is_string(this.__el_classes)&&(this.__el_classes=this.__el_classes.split(" ")),this.__added_el_classes=[],this._setOption(t,"el_styles",{}),this._setOption(t,"children_styles",{}),this._setOption(t,"children_classes",[]),BetaJS.Types.is_string(this.__children_classes)&&(this.__children_classes=this.__children_classes.split(" ")),this._setOption(t,"invalidate_on_change",!1),this.__old_el_styles={},this._setOption(t,"css",{}),this.__parent=null,this.__children={},this.__active=!1,this.$el=null,this.__events=this._events().concat(this.__events);var e=BetaJS.Objs.extend(BetaJS.Types.is_function(this._templates)?this._templates():this._templates,t.templates||{});"template"in t&&(e["default"]=t.template),this.__templates={};for(var i in e)this.__templates[i]=new BetaJS.Templates.Template(BetaJS.Types.is_string(e[i])?e[i]:e[i].html());var s=BetaJS.Objs.extend(BetaJS.Types.is_function(this._dynamics)?this._dynamics():this._dynamics,t.dynamics||{});"dynamic"in t&&(s["default"]=t.dynamic),this.__dynamics={};for(var i in s)this.__dynamics[i]=new BetaJS.Views.DynamicTemplate(this,BetaJS.Types.is_string(s[i])?s[i]:s[i].html());this.setAll(t.properties||{}),this.__invalidate_on_change&&this.on("change",function(){this.invalidate()},this)},isActive:function(){return this.__active},activate:function(){if(this.isActive())return this;if(null==this.__el)return null;if(this.__parent&&!this.__parent.isActive())return null;if(this.$el=this.__parent?""==this.__el?this.__parent.$el:this.__parent.$(this.__el):BetaJS.$(this.__el),0==this.$el.size()&&(this.$el=null),!this.$el)return null;this.__append_to_el&&(this.$el.append("<div data-view-id='"+this.cid()+"'></div>"),this.$el=this.$el.find("[data-view-id='"+this.cid()+"']")),this.__old_attributes={};for(var t in this.__attributes){var e=this.$el.attr(t);this.__old_attributes[t]=BetaJS.Types.is_defined(e)?e:null,this.$el.attr(t,this.__attributes[t])}this.__added_el_classes=[];for(var i=BetaJS.Objs.extend(this._el_classes(),this.__el_classes),s=0;i.length>s;++s)this.$el.hasClass(i[s])||(this.$el.addClass(i[s]),this.__added_el_classes.push(i[s]));this.__old_el_styles={};var n=BetaJS.Objs.extend(this._el_styles(),this.__el_styles);for(var t in n){var e=this.$el.css(t);this.__old_el_styles[t]=BetaJS.Types.is_defined(e)?e:null,this.$el.css(t,n[t])}return this.__bind(),this.__visible||this.$el.css("display",this.__visible?"":"none"),this.__active=!0,this.__render(),this.__visible&&this.__bind_hide_on_leave(),BetaJS.Objs.iter(this.__children,function(t){t.view.activate()}),this.__visible&&this._after_show(),this.__vertical_center&&(this.$el.css("top","50%"),this.$el.css("margin-top",Math.round(-this.$el.height()/2)+"px")),this.__horizontal_center&&(this.$el.css("left","50%"),this.$el.css("margin-left",Math.round(-this.$el.width()/2)+"px")),this._notify("activate"),this},deactivate:function(){if(!this.isActive())return!1;this._notify("deactivate"),BetaJS.Objs.iter(this.__children,function(t){t.view.deactivate()}),this.__active=!1,this.__visible&&this.__unbind_hide_on_leave(),BetaJS.Objs.iter(this.__dynamics,function(t){t.reset()},this),this.__unbind(),this.$el.html("");for(var t in this.__old_attributes)this.$el.attr(t,this.__old_attributes[t]);for(var e=0;this.__added_el_classes.length>e;++e)this.$el.removeClass(this.__added_el_classes[e]);for(var t in this.__old_el_styles)this.$el.css(t,this.__old_el_styles[t]);return this.__append_to_el&&this.$el.remove(),this.$el=null,!0},_el_styles:function(){return{}},_el_classes:function(){return[]},$:function(t){return this.$el.find(t)},$data:function(t,e){e||(e=this.$el);var i="";for(var s in t)i+="[data-"+s+"='"+t[s]+"']";return e.find(i)},destroy:function(){this.deactivate(),BetaJS.Objs.iter(this.__children,function(t){t.view.destroy()}),BetaJS.Objs.iter(this.__dynamics,function(t){t.destroy()},this),BetaJS.Objs.iter(this.__templates,function(t){t.destroy()},this),this.trigger("destroy"),this._inherited(BetaJS.Views.View,"destroy")},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},isVisible:function(){return this.__visible},setVisibility:function(t){t!=this.__visible&&(this.__visible=t,this.isActive()&&(this.$el.css("display",this.__visible?"":"none"),this.__visible?(this.__bind_hide_on_leave(),this._after_show()):this.__unbind_hide_on_leave()),this.__parent&&this.__parent.updateChildVisibility(this))},updateChildVisibility:function(){},_after_show:function(){this.__invalidate_on_show&&this.invalidate()},toggle:function(){this.setVisibility(!this.isVisible())},__bind:function(){var t=this;this.__unbind(),BetaJS.Objs.iter(this.__events,function(e){BetaJS.Objs.iter(e,function(e,i){var s=BetaJS.Types.is_function(e)?e:t[e],n=i.match(BetaJS.Views.BIND_EVENT_SPLITTER),r=n[1],_=n[2];r=r+".events"+t.cid();var o=BetaJS.Functions.as_method(s,t);""===_?t.$el.on(r,o):t.$el.on(r,_,o)})})},__unbind:function(){this.$el.off(".events"+this.cid())},__render:function(){if(this.isActive()){this._render();var t=this.$el.children();if(!BetaJS.Types.is_empty(this.__children_styles))for(var e in this.__children_styles)t.css(e,this.__children_styles[e]);BetaJS.Objs.iter(this.__children_classes,function(e){t.addClass(e)})}},invalidate:function(){this.isActive()&&(BetaJS.Objs.iter(this.__children,function(t){t.view.deactivate()}),BetaJS.Objs.iter(this.__dynamics,function(t){t.reset()},this),this.__render(),BetaJS.Objs.iter(this.__children,function(t){t.view.activate()}))},setEl:function(t){this.isActive()?(this.deactivate(),this.__el=t,this.activate()):this.__el=t},getParent:function(){return this.__parent},hasChild:function(t){return t&&t.cid()in this.__children},setParent:function(t){if(t!=this.__parent){if(this.deactivate(),this.__parent){this._unbindParent(this.__parent);var e=this.__parent;this.__parent.off(null,null,this),this.__parent=null,e.removeChild(this)}t&&(this.__parent=t,t.addChild(this),this._bindParent(t),t.isActive()&&this.activate())}},_bindParent:function(){},_unbindParent:function(){},children:function(){var t={};return BetaJS.Objs.iter(this.__children,function(e,i){t[i]=e.view},this),t},childOptions:function(t){return this.__children[t.cid()].options},addChildren:function(t){BetaJS.Objs.iter(t,function(t){this.addChild(t)},this)},addChild:function(t,e){return this.hasChild(t)?null:(e=e||{},this.__children[t.cid()]={view:t,options:e},this._notify("addChild",t,e),t.setParent(this),t)},removeChildren:function(t){BetaJS.Objs.iter(t,function(t){this.removeChild(t)},this)},removeChild:function(t){this.hasChild(t)&&(delete this.__children[t.cid()],t.setParent(null),t.off(null,null,this),this._notify("removeChild",t))},width:function(){return this.$el.width()},innerWidth:function(){return this.$el.innerWidth()},outerWidth:function(){return this.$el.outerWidth()},height:function(){return this.$el.height()},innerHeight:function(){return this.$el.innerHeight()},outerHeight:function(){return this.$el.outerHeight()},__bind_hide_on_leave:function(){if(this.__hide_on_leave&&!this.__hide_on_leave_func){var t=this.$el.get(0),e=this;this.__hide_on_leave_func=function(i){return e.__hide_on_leave_skip?(e.__hide_on_leave_skip=!1,void 0):(document.contains(i.target)&&i.target!==t&&!$.contains(t,i.target)&&e.hide(),void 0)},this.__hide_on_leave_skip=!0,BetaJS.$(document.body).on("click",this.__hide_on_leave_func)}},__unbind_hide_on_leave:function(){this.__hide_on_leave&&this.__hide_on_leave_func&&($(document.body).unbind("click",this.__hide_on_leave_func),delete this.__hide_on_leave_func)}}]),BetaJS.Views.BIND_EVENT_SPLITTER=/^(\S+)\s*(.*)$/,BetaJS.Class.extend("BetaJS.Views.DynamicTemplate",{constructor:function(t,e){this._inherited(BetaJS.Views.DynamicTemplate,"constructor"),this.__parent=t,this.__template=new BetaJS.Templates.Template(e),this.__instances={},this.__instances_by_name={}},reset:function(){BetaJS.Objs.iter(this.__instances,function(t){this.removeInstance(t)},this)},destroy:function(){this.reset(),this._inherited(BetaJS.Views.DynamicTemplate,"destroy")},renderInstance:function(t,e){e=e||{},e.name&&this.removeInstanceByName(e.name);var i=new BetaJS.Views.DynamicTemplateInstance(this,t,e);this.__instances[i.cid()]=i,e.name&&(this.__instances_by_name[name]=i)},removeInstanceByName:function(t){t in this.__instances_by_name&&this.removeInstance(this.__instances_by_name[t])},removeInstance:function(t){delete this.__instances[t.cid()],delete this.__instances_by_name[t.name()],t.destroy()},view:function(){return this.__parent},template:function(){return this.__template}}),BetaJS.Class.extend("BetaJS.Views.DynamicTemplateInstance",[BetaJS.Ids.ClientIdMixin,BetaJS.Events.ListenMixin,{__bind:{attr:function(t,e){return this.__context.__bind_attribute(t,e)},attrs:function(t){var e="";for(attribute in t)e+=this.attr(attribute,t[attribute])+" ";return e},value:function(t){return this.__context.__bind_value(t)},inner:function(t){return this.__context.__bind_inner(t)},css_if:function(t,e){return this.__context.__bind_css_if(t,e,!0)},css_if_not:function(t,e){return this.__context.__bind_css_if(t,e,!1)}},__new_element:function(t){var e=BetaJS.Ids.uniqueId();return this.__elements[e]=BetaJS.Objs.extend({id:e,$el:null},t),this.__elements[e]},__decompose_variable:function(t){var e=t.split(".");return{object:1==e.length?this.__parent.view():this.__args[e[0]],key:1==e.length?t:e[1]}},__get_variable:function(t){var e=this.__decompose_variable(t);return e.object.get(e.key)},__set_variable:function(t,e){var i=this.__decompose_variable(t);return i.object.set(i.key,e)},__update_element:function(t){var e=this.__get_variable(t.variable);"inner"==t.type?t.$el.html(e):"value"==t.type?t.$el.val()!=e&&t.$el.val(e):"attribute"==t.type?t.$el.attr(t.attribute,e):"css"==t.type&&(t.positive||(e=!e),e?t.$el.addClass(this.__parent.view().css(t.css)):t.$el.removeClass(this.__parent.view().css(t.css)))},__prepare_element:function(t){var e=this;t.$el=this.$el.find(t.selector),"inner"==t.type||"css"==t.type?this.__update_element(t):"value"==t.type&&t.$el.on("change input keyup paste",function(){e.__set_variable(t.variable,t.$el.val())})},__bind_attribute:function(t,e){var i=this.__new_element({type:"attribute",attribute:t,variable:e}),s="data-bind-"+t+"='"+i.id+"'";i.selector="["+s+"]";var n=this.__decompose_variable(e);return this.listenOn(n.object,"change:"+n.key,function(){this.__update_element(i)},this),s+" "+t+"='"+n.object.get(n.key)+"'"},__bind_css_if:function(t,e,i){var s=this.__new_element({type:"css",css:t,variable:e,positive:i}),n="data-bind-css-"+t+"='"+s.id+"'";s.selector="["+n+"]";var r=this.__decompose_variable(e);return this.listenOn(r.object,"change:"+r.key,function(){this.__update_element(s)},this),n},__bind_value:function(t){var e=this.__new_element({type:"value",variable:t}),i="data-bind-value='"+e.id+"'";e.selector="["+i+"]";var s=this.__decompose_variable(t);return this.listenOn(s.object,"change:"+s.key,function(){this.__update_element(e)},this),i+" value='"+s.object.get(s.key)+"'"},__bind_inner:function(t){var e=this.__new_element({type:"inner",variable:t}),i="data-bind-inner='"+e.id+"'";e.selector="["+i+"]";var s=this.__decompose_variable(t);return this.listenOn(s.object,"change:"+s.key,function(){this.__update_element(e)},this),i},constructor:function(t,e,i){this._inherited(BetaJS.Views.DynamicTemplateInstance,"constructor"),this.__elements={},this.__inners={},i=i||{},i.name&&(this.__name=name),this.__parent=t,this.$el=e,this.__args=BetaJS.Objs.extend(i.args||{},this.__parent.view().templateArguments()),this.__args.bind=BetaJS.Objs.extend({__context:this},this.__bind),this.$el.html(t.template().evaluate(this.__args)),BetaJS.Objs.iter(this.__elements,function(t){this.__prepare_element(t)},this)},destroy:function(){BetaJS.Objs.iter(this.__elements,function(t){t.$el.off()},this),this._inherited(BetaJS.Views.DynamicTemplateInstance,"destroy")},name:function(){return this.__name}}]),BetaJS.Class.extend("BetaJS.Routers.Router",[BetaJS.Events.EventsMixin,{routes:[],constructor:function(t){this._inherited(BetaJS.Routers.Router,"constructor");var e=BetaJS.Types.is_function(this.routes)?this.routes():this.routes;BetaJS.Types.is_array(e)||(e=[e]),"routes"in t&&(BetaJS.Types.is_array(t.routes)?e=e.concat(t.routes):e.push(t.routes)),this.__routes=[],this.__paths={},this.__current=null,BetaJS.Objs.iter(e,function(t){BetaJS.Objs.iter(t,function(t,e){BetaJS.Types.is_string(t)&&(t={action:t}),t.key=e,t.route=RegExp("^"+e+"$"),"applicable"in t?BetaJS.Types.is_array(t.applicable)||(t.applicable=[t.applicable]):t.applicable=[],"valid"in t?BetaJS.Types.is_array(t.valid)||(t.valid=[t.valid]):t.valid=[],"path"in t||(t.path=t.key),this.__routes.push(t),this.__paths[t.path]=t},this)},this),"actions"in t&&BetaJS.Objs.iter(t.actions,function(t,e){this[e]=t},this)},destroy:function(){this.__leave(),this._inherited(BetaJS.Routers.Router,"destroy")},parse:function(t){for(var e=0;this.__routes.length>e;++e){var i=this.__routes[e],s=i.route.exec(t);if(null!=s){s.shift(1);var n=!0;if(BetaJS.Objs.iter(i.applicable,function(t){var e=BetaJS.Types.is_string(t)?this[t]:t;n=n&&e.apply(this,s)},this),!n)continue;var r=!0;return BetaJS.Objs.iter(i.valid,function(t){var e=BetaJS.Types.is_string(t)?this[t]:t;r=r&&e.apply(this,s)},this),r?{object:i,params:s}:null}}return null},object:function(t){return this.__paths[t]},path:function(t){for(var e=this.object(t).key,i=Array.prototype.slice.apply(arguments,[1]),s=/\(.*?\)/;arg=i.shift();)e=e.replace(s,arg);return e},navigate:function(t){this.trigger("navigate",t);var e=this.parse(t);return null==e?(this.trigger("navigate-fail",t),!1):(this.trigger("navigate-success",e.object,e.params),this.invoke(e.object,e.params,t))},invoke:function(t,e,i){i=i||this.path(t.key,e),this.trigger("before_invoke",t,e,i),this.__enter(t,e,i),this.trigger("after_invoke",t,e,i);var s=this._invoke(t,e);return s},_invoke:function(t,e){var i=t.action;return BetaJS.Types.is_string(i)&&(i=this[i]),i.apply(this,e)},__leave:function(){null!=this.__current&&(this.trigger("leave",this.__current),this.__current.destroy(),this.__current=null)},__enter:function(t,e,i){this.__leave(),this.__current=new BetaJS.Events.Events,this.__current.route=i,this.__current.object=t,this.__current.params=e,this.trigger("enter",this.__current)},current:function(){return this.__current}}]),BetaJS.Class.extend("BetaJS.Routers.RouterHistory",[BetaJS.Events.EventsMixin,{constructor:function(t){this._inherited(BetaJS.Routers.RouterHistory,"constructor"),this.__router=t,this.__history=[],t.on("after_invoke",this.__after_invoke,this)},destroy:function(){this.__router.off(null,null,this),this._inherited(BetaJS.Routers.RouterHistory,"destroy")},__after_invoke:function(t,e){this.__history.push({object:t,params:e}),this.trigger("change")},last:function(t){return t=t||0,this.get(this.count()-1-t)},count:function(){return this.__history.length},get:function(t){return t=t||0,this.__history[t]},getRoute:function(t){var e=this.get(t);return this.__router.path(e.object.path,e.params)},back:function(t){if(!(2>this.count())){for(t=t||0;t>=0&&this.count()>1;)this.__history.pop(),--t;var e=this.__history.pop();return this.trigger("change"),this.__router.invoke(e.object,e.params)}}}]),BetaJS.Class.extend("BetaJS.Routers.RouteBinder",{constructor:function(t){this._inherited(BetaJS.Routers.RouteBinder,"constructor"),this.__router=t,this.__router.on("after_invoke",function(t,e,i){this._getExternalRoute()!=i&&this._setExternalRoute(i)},this)},destroy:function(){this.__router.off(null,null,this),this._inherited(BetaJS.Routers.RouteBinder,"destroy")},_setRoute:function(t){var e=this.__router.current();e&&e.route==t||this.__router.navigate(t)},_getExternalRoute:function(){return""},_setExternalRoute:function(){}}),BetaJS.Routers.RouteBinder.extend("BetaJS.Routers.HashRouteBinder",[BetaJS.Ids.ClientIdMixin,{constructor:function(t){this._inherited(BetaJS.Routers.HashRouteBinder,"constructor",t);var e=this;BetaJS.$(window).on("hashchange.events"+this.cid(),function(){e._setRoute(e._getExternalRoute())})},destroy:function(){BetaJS.$(window).off("hashchange.events"+this.cid()),this._inherited(BetaJS.Routers.HashRouteBinder,"destroy")},_getExternalRoute:function(){var t=window.location.hash;return t.length&&"#"==t[0]?t.slice(1):t},_setExternalRoute:function(t){window.location.hash="#"+t}}]),BetaJS.Routers.RouteBinder.extend("BetaJS.Routers.HistoryRouteBinder",[BetaJS.Ids.ClientIdMixin,{constructor:function(t){this._inherited(BetaJS.Routers.HistoryRouteBinder,"constructor",t);var e=this;BetaJS.$(window).on("popstate.events"+this.cid(),function(){e._setRoute(e._getExternalRoute())})},destroy:function(){BetaJS.$(window).off("popstate.events"+this.cid()),this._inherited(BetaJS.Routers.HistoryRouteBinder,"destroy")},_getExternalRoute:function(){return window.location.pathname},_setExternalRoute:function(t){window.history.pushState(this,document.title,t)}}],{supported:function(){return window.history&&window.history.pushState}}),BetaJS.Routers.RouteBinder.extend("BetaJS.Routers.LocationRouteBinder",{_getExternalRoute:function(){return window.location.pathname},_setExternalRoute:function(t){window.location.pathname=t}}),BetaJS.Templates.Cached=BetaJS.Templates.Cached||{},BetaJS.Templates.Cached["holygrail-view-template"]="  <div data-selector=\"right\" class='holygrail-view-right-container'></div>  <div data-selector=\"left\" class='holygrail-view-left-container'></div>  <div data-selector=\"center\" class='holygrail-view-center-container'></div> ",BetaJS.Templates.Cached["list-container-view-item-template"]='  <div data-view-id="{%= cid %}"></div> ',BetaJS.Templates.Cached["switch-container-view-item-template"]='  <div data-view-id="{%= cid %}" class="switch-container" data-selector="switch-container-item"></div> ',BetaJS.Templates.Cached["button-view-template"]='   <{%= button_container_element %} data-selector="button-inner"    {%= bind.inner("label") %}>   </{%= button_container_element %}>  ',BetaJS.Templates.Cached["check-box-view-template"]='  <input type="checkbox" {%= checked ? "checked" : "" %} />  {%= label %} ',BetaJS.Templates.Cached["input-view-template"]='  <input class="input-view" {%= bind.value("value") %} {%= bind.attr("placeholder", "placeholder") %} /> ',BetaJS.Templates.Cached["label-view-template"]='  <{%= element %} class="{%= supp.css(\'label\') %}" {%= bind.inner("label") %}></{%= element %}> ',BetaJS.Templates.Cached["link-view-template"]='  <a href="javascript:{}" {%= bind.inner("label") %}></a> ',BetaJS.Templates.Cached["text-area-template"]='   <textarea {%= bind.value("value") %} {%= bind.attr("placeholder", "placeholder") %}             {%= bind.css_if_not("text-area-no-resize", "resizable") %}             {%= readonly ? \'readonly\' : \'\' %}             style="resize: {%= horizontal_resize ? (vertical_resize ? \'both\' : \'horizontal\') : (vertical_resize ? \'vertical\' : \'none\') %}"             {%= bind.css_if("text-area-horizontal-fill", "horizontal_fill") %}></textarea>  ',BetaJS.Templates.Cached["progress-template"]="  <div class=\"{%= supp.css('outer') %}\">   <div data-selector=\"inner\" class=\"{%= supp.css('inner') %}\" style=\"{%= horizontal ? 'width': 'height' %}:{%= value*100 %}%\">    {%= label %}   </div>  </div> ",BetaJS.Templates.Cached["list-view-template"]='   <{%= list_container_element %}    {%= supp.attrs(list_container_attrs) %}    class="{%= list_container_classes %}"    data-selector="list">   </{%= list_container_element %}>  ',BetaJS.Templates.Cached["list-view-item-container-template"]='   <{%= item_container_element %}    {%= supp.attrs(item_container_attrs) %}    class="{%= item_container_classes %}"    {%= supp.list_item_attr(item) %}>   </{%= item_container_element %}>  ',BetaJS.Templates.Cached["overlay-view-template"]='  <div data-selector="container"></div> ',BetaJS.Templates.Cached["fullscreen-overlay-view-template"]='  <div class="fullscreen-overlay-background" data-selector="outer"></div>  <div class="fullscreen-overlay" data-selector="inner"></div> ',BetaJS.Views.View.extend("BetaJS.Views.HolygrailView",{_templates:{"default":BetaJS.Templates.Cached["holygrail-view-template"]},constructor:function(t){this._inherited(BetaJS.Views.HolygrailView,"constructor",t),this.__left=null,this.__center=null,this.__right=null},getLeft:function(){return this.__left},setLeft:function(t){return this.__setView("left",t)},getCenter:function(){return this.__center},setCenter:function(t){return this.__setView("center",t)},getRight:function(){return this.__right},setRight:function(t){return this.__setView("right",t)},__setView:function(t,e){return this.removeChild(this["__"+t]),this["__"+t]=null,e&&(e.setEl('[data-selector="'+t+'"]'),this["__"+t]=this.addChild(e)),e}}),BetaJS.Views.View.extend("BetaJS.Views.ListContainerView",{_templates:{item:BetaJS.Templates.Cached["list-container-view-item-template"]},_notifications:{addChild:"__addChildContainer",removeChild:"__removeChildContainer"},constructor:function(t){t=t||{},this._inherited(BetaJS.Views.ListContainerView,"constructor",t),this._setOption(t,"alignment","horizontal"),this._setOption(t,"positioning","float")},isHorizontal:function(){return"horizontal"==this.__alignment},_render:function(){this.$el.html(""),BetaJS.Objs.iter(this.children(),function(t){this.__addChildContainer(t)},this)},__addChildContainer:function(t){var e=this.childOptions(t);if(this.isActive()&&this.$el.append(this.evaluateTemplate("item",{cid:t.cid()})),t.setEl("[data-view-id='"+t.cid()+"']"),!this.isHorizontal()||"float"in e||"float"!=this.__positioning||(e["float"]="left"),this.isActive()&&"float"in e&&"float"==this.__positioning){var i=this.$("[data-view-id='"+t.cid()+"']");i.css("float",e["float"])}},__removeChildContainer:function(t){this.$data({"view-id":t.cid()}).remove()},__updatePositioningHelper:function(t,e,i){var s=0;BetaJS.Objs.iter(t,function(t){var n=this.childOptions(t);return n.type&&"ignore"==n.type||(t.$el.css(e,s+"px"),t.isVisible()&&(s+=parseInt(t.$el.css(i))),!n.type||"dynamic"!=n.type)?void 0:!1},this)},__updatePositioning:function(){var t=BetaJS.Objs.values(this.children()),e=BetaJS.Objs.clone(t,1).reverse(),i=this.isHorizontal()?"left":"top",s=this.isHorizontal()?"right":"bottom",n=this.isHorizontal()?"width":"height";this.__updatePositioningHelper(e,s,n),this.__updatePositioningHelper(t,i,n)},updateChildVisibility:function(t){this._inherited(BetaJS.Views.ListContainerView,"updateChildVisibility",t),"computed"==this.__positioning&&this.__updatePositioning()},_after_show:function(){this._inherited(BetaJS.Views.ListContainerView,"_after_show"),"computed"==this.__positioning&&this.__updatePositioning()}}),BetaJS.Views.View.extend("BetaJS.Views.SingleContainerView",{constructor:function(t){this._inherited(BetaJS.Views.SingleContainerView,"constructor",t),this.__view=null},getView:function(){return this.__view},setView:function(t){this.removeChild(this.__view),t&&(t.setEl(""),this.__view=this.addChild(t))}}),BetaJS.Views.View.extend("BetaJS.Views.SwitchContainerView",{_templates:{item:BetaJS.Templates.Cached["switch-container-view-item-template"]},_notifications:{addChild:"__addChildContainer",removeChild:"__removeChildContainer"},constructor:function(t){this._inherited(BetaJS.Views.SwitchContainerView,"constructor",t),this.__selected=null},_render:function(){this.$el.html(""),BetaJS.Objs.iter(this.children(),function(t){this.__addChildContainer(t)
},this)},__addChildContainer:function(t){this.isActive()&&this.$el.append(this.evaluateTemplate("item",{cid:t.cid()})),t.setEl("[data-view-id='"+t.cid()+"']"),this.__selected=this.__selected||t,t.setVisibility(this.__selected==t)},__removeChildContainer:function(t){this.$data({"view-id":t.cid()}).remove(),this.__selected==t&&(this.__selected=null)},select:function(t){this.__selected=t,BetaJS.Objs.iter(this.children(),function(t){t.setVisibility(this.__selected==t)},this)},selected:function(){return this.__selected}}),BetaJS.Views.View.extend("BetaJS.Views.ButtonView",{_dynamics:{"default":BetaJS.Templates.Cached["button-view-template"]},constructor:function(t){this._inherited(BetaJS.Views.ButtonView,"constructor",t),this._setOptionProperty(t,"label",""),this._setOptionProperty(t,"button_container_element","button")},_events:function(){return this._inherited(BetaJS.Views.ButtonView,"_events").concat([{"click [data-selector='button-inner']":"__clickButton"}])},__clickButton:function(){this.trigger("click")}}),BetaJS.Views.View.extend("BetaJS.Views.InputView",{_dynamics:{"default":BetaJS.Templates.Cached["input-view-template"]},_events:function(){return[{"keyup input":"__keyupEvent","blur input":"__leaveEvent"},{"keyup input":"__changeEvent","change input":"__changeEvent","input input":"__changeEvent","paste input":"__changeEvent"}]},constructor:function(t){t=t||{},this._inherited(BetaJS.Views.InputView,"constructor",t),this._setOptionProperty(t,"value",""),this._setOptionProperty(t,"placeholder","")},__keyupEvent:function(t){var e=t.keyCode||t.which;13==e&&this.trigger("enter_key",this.get("value"))},__leaveEvent:function(){this.trigger("leave")},__changeEvent:function(){this.trigger("change",this.get("value"))},focus:function(t){this.$("input").focus(),this.$("input").focus(),t&&this.$("input").select()}}),BetaJS.Views.View.extend("BetaJS.Views.CheckBoxView",{_templates:{"default":BetaJS.Templates.Cached["check-box-view-template"]},_events:function(){return this._inherited(BetaJS.Views.ButtonView,"_events").concat([{"click input":"__click"}])},constructor:function(t){t=t||{},t.invalidate_on_change=!0,this._inherited(BetaJS.Views.CheckBoxView,"constructor",t),this._setOptionProperty(t,"checked",!1),this._setOptionProperty(t,"label","")},__click:function(){this.set("checked",this.$("input").is(":checked")),this.trigger("check",this.get("checked"))}}),BetaJS.Views.View.extend("BetaJS.Views.LabelView",{_dynamics:{"default":BetaJS.Templates.Cached["label-view-template"]},_css:function(){return{label:"label-view-class"}},_events:function(){return[{click:"__clickEvent"}]},constructor:function(t){this._inherited(BetaJS.Views.LabelView,"constructor",t),this._setOptionProperty(t,"label",""),this._setOptionProperty(t,"element","span")},__clickEvent:function(){this.trigger("click")}}),BetaJS.Views.SwitchContainerView.extend("BetaJS.Views.InputLabelView",{constructor:function(t){this._inherited(BetaJS.Views.InputLabelView,"constructor",t),this._setOptionProperty(t,"value",""),this._setOptionProperty(t,"placeholder",""),this._setOption(t,"edit_on_click",!0),this._setOption(t,"label_mode",!0),this.label=this.addChild(new BetaJS.Views.LabelView({label:this.binding("value"),el_classes:t.label_el_classes,children_classes:t.label_children_classes})),this.input=this.addChild(new BetaJS.Views.InputView({value:this.binding("value"),placeholder:this.binding("placeholder")})),this.__label_mode||this.select(this.input),this.input.on("leave enter_key",function(){this.label_mode()},this),this.__edit_on_click&&this.label.on("click",function(){this.edit_mode()},this)},is_label_mode:function(){return this.__label_mode},is_edit_mode:function(){return!this.__label_mode},label_mode:function(){this.is_label_mode()||(this.__label_mode=!0,this.select(this.label))},edit_mode:function(){this.is_edit_mode()||(this.__label_mode=!1,this.select(this.input),this.input.focus(!0))}}),BetaJS.Views.View.extend("BetaJS.Views.LinkView",{_dynamics:{"default":BetaJS.Templates.Cached["link-view-template"]},constructor:function(t){this._inherited(BetaJS.Views.LinkView,"constructor",t),this._setOptionProperty(t,"label","")},_events:function(){return this._inherited(BetaJS.Views.LinkView,"_events").concat([{"click a":"__click"}])},__click:function(){this.trigger("click")}}),BetaJS.Views.View.extend("BetaJS.Views.TextAreaView",{_dynamics:{"default":BetaJS.Templates.Cached["text-area-template"]},constructor:function(t){this._inherited(BetaJS.Views.TextAreaView,"constructor",t),this._setOptionProperty(t,"value",""),this._setOptionProperty(t,"placeholder",""),this._setOptionProperty(t,"horizontal_resize",!1),this._setOptionProperty(t,"vertical_resize",!0),this._setOptionProperty(t,"horizontal_fill",!1),this._setOptionProperty(t,"readonly",!1),this.on("change:readonly",function(){this.get("readonly")?this.$("textarea").attr("readonly","readonly"):this.$("textarea").removeAttr("readonly")},this)}}),BetaJS.Views.View.extend("BetaJS.Views.ProgressView",{_templates:{"default":BetaJS.Templates.Cached["progress-template"]},_css:{outer:"",inner:""},constructor:function(t){this._inherited(BetaJS.Views.ProgressView,"constructor",t),this._setOptionProperty(t,"label",""),this._setOptionProperty(t,"horizontal",!0),this._setOptionProperty(t,"value",1),this.on("change:value",function(t){this.isActive()&&this.$("[data-selector='inner']").css(this.get("horizontal")?"width":"height",100*t+"%")},this)}}),BetaJS.Views.View.extend("BetaJS.Views.CustomListView",{_templates:function(){return{"default":BetaJS.Templates.Cached["list-view-template"],"item-container":BetaJS.Templates.Cached["list-view-item-container-template"]}},_supp:function(){return BetaJS.Objs.extend(this._inherited(BetaJS.Views.CustomListView,"_supp"),{list_item_attr:function(t){return this.attrs({"data-view-id":this.__context.cid(),"data-cid":BetaJS.Ids.objectId(t),"data-index":this.__context.__collection.getIndex(t)})}})},constructor:function(t){if(this._inherited(BetaJS.Views.CustomListView,"constructor",t),this._setOption(t,"list_container_element","ul"),this._setOption(t,"list_container_attrs",{}),this._setOption(t,"list_container_classes",""),this._setOption(t,"item_container_element","li"),this._setOption(t,"item_container_classes",""),this.__itemData={},"collection"in t)this.__collection=t.collection,this.__destroy_collection="destroy_collection"in t?t.destroy_collection:!1,"compare"in t&&this.__collection.set_compare(t.compare);else{var e={};"objects"in t&&(e.objects=t.objects),"compare"in t&&(e.compare=t.compare),this.__collection=new BetaJS.Collections.Collection(e),this.__destroy_collection=!0}this.__collection.on("add",function(t){this.__addItem(t,!0)},this),this.__collection.on("remove",function(t){this.__removeItem(t)},this),this.__collection.on("change",function(t){this.__changeItem(t)},this),this.__collection.on("index",function(t,e){this.__updateItemIndex(t,e)},this),this.__collection.on("reindexed",function(t){this.__reIndexItem(t)},this),this.__collection.on("sorted",function(){this.__sorted()},this)},destroy:function(){for(var t in this.__itemData)this._destroyItemData(this.__itemData[t]);this.__itemData=null,this.__collection.off(null,null,this),this.__destroy_collection&&this.__collection.destroy(),this._inherited(BetaJS.Views.CustomListView,"destroy")},collection:function(){return this.__collection},add:function(t){this.__collection.add(t)},remove:function(t){this.__collection.remove(t)},_render:function(){this.$selector_list=this._renderListContainer();var t=this;this.__collection.iterate(function(e){t.__addItem(e,!1)})},_renderListContainer:function(){return this.$el.html(this.evaluateTemplate("default",{list_container_element:this.__list_container_element,list_container_attrs:this.__list_container_attrs,list_container_classes:this.__list_container_classes})),this.$data({selector:"list"})},_findItemElement:function(t){return this.$data({"view-id":this.cid(),cid:BetaJS.Ids.objectId(t)},this.$selector_list)},_findIndexElement:function(t){return this.$data({"view-id":this.cid(),index:t},this.$selector_list)},__changeItem:function(t){this.isActive()&&this._changeItem(t)},_newItemData:function(){return{}},_destroyItemData:function(){},itemData:function(t){return this.__itemData[BetaJS.Ids.objectId(t)]},_changeItem:function(){},__addItem:function(t,e){if(this.isActive()){var i=this.evaluateTemplate("item-container",{item:t,item_container_element:this.__item_container_element,item_container_attrs:this.__item_container_attrs,item_container_classes:this.__item_container_classes}),s=this.__collection.getIndex(t);if(0==s)this.$selector_list.prepend(i);else{var n=this._findIndexElement(s-1);if(n.length>0)n.after(i);else{var r=this._findIndexElement(s+1);r.length>0?r.before(i):this.$selector_list.append(i)}}var _=this._findItemElement(t);this.__itemData[BetaJS.Ids.objectId(t)]&&this._destroyItemData(this.__itemData[BetaJS.Ids.objectId(t)]),this.__itemData[BetaJS.Ids.objectId(t)]=this._newItemData(t),this._addItem(t,_,e),this._addElement(_,e)}},_addElement:function(){},_addItem:function(){},__removeItem:function(t){if(this.isActive()){var e=this._findItemElement(t);this._removeItem(t,e),this._destroyItemData(this.__itemData[BetaJS.Ids.objectId(t)]),delete this.__itemData[BetaJS.Ids.objectId(t)],this._removeElement(e)}},_removeElement:function(t){t.remove()},_removeItem:function(){},__updateItemIndex:function(t,e){var i=this._findItemElement(t);i.attr("data-index",e),this._updateItemIndex(t,i)},__reIndexItem:function(t){var e=this._findItemElement(t),i=this.collection().getIndex(t);if(0==i)this.$selector_list.prepend(e);else{var s=this._findIndexElement(i-1);s.after(e)}},_updateItemIndex:function(){},__sort:function(){for(var t=this.collection().count()-1;t>=0;t--)this.$selector_list.prepend(this._findIndexElement(t))}}),BetaJS.Views.CustomListView.extend("BetaJS.Views.ListView",{constructor:function(t){this._inherited(BetaJS.Views.ListView,"constructor",t),this._setOption(t,"item_label","label"),this._setOption(t,"render_item_on_change",null==this.dynamics("item"))},_changeItem:function(t){if(this.__render_item_on_change){var e=this._findItemElement(t);this._renderItem(t,e,!1)}},_addItem:function(t,e,i){this._renderItem(t,e,i)},_renderItem:function(t,e){null!=this.templates("item")?e.html(this.evaluateTemplate("item",{item:t})):null!=this.dynamics("item")?this.evaluateDynamics("item",e,{item:t},{name:"item-"+BetaJS.Ids.objectId(t)}):e.html(t.get(this.__item_label))},_removeItem:function(t){null!=this.dynamics("item")&&this.dynamics("item").removeInstanceByName("item-"+BetaJS.Ids.objectId(t))}}),BetaJS.Views.CustomListView.extend("BetaJS.Views.SubViewListView",{constructor:function(t){this._inherited(BetaJS.Views.SubViewListView,"constructor",t),"create_view"in t&&(this._create_view=t.create_view),this._setOption(t,"sub_view",BetaJS.Views.LabelView),this._setOption(t,"item_label","label");var e=this;this._setOption(t,"sub_view_options",function(t){return{label:t.binding(e.__item_label)}})},_create_view:function(t,e){var i=this.__sub_view_options(t);return i.el=e,new this.__sub_view(i)},_addItem:function(t,e){var i=this._create_view(t,e);this.itemData(t).view=i,this.addChild(i)},_destroyItemData:function(t){this.removeChild(t.view),t.view.destroy()}}),BetaJS.Views.View.extend("BetaJS.Views.ItemListItemView",{constructor:function(t){this._inherited(BetaJS.Views.ItemListItemView,"constructor",t),this._setOptionProperty(t,"item",null),this._setOptionProperty(t,"_selected",!1)},_events:function(){return[{click:"__click"}]},isSelected:function(){return this.get("_selected")},__click:function(){this.getParent().__click_select&&this.select()},select:function(){this.getParent().select(this.get("item"))},unselect:function(){this.getParent().unselect(this.get("item"))}}),BetaJS.Views.CustomListView.extend("BetaJS.Views.ItemListView",{constructor:function(t){if(this._inherited(BetaJS.Views.ItemListView,"constructor",t),this._setOption(t,"sub_view",BetaJS.Views.ItemListItemView),this._sub_view_options||(this._sub_view_options={}),this._sub_view_options&&!BetaJS.Types.is_function(this._sub_view_options)){var e=this._sub_view_options;this._sub_view_options=function(){return e}}if(t.sub_view_options){if(!BetaJS.Types.is_function(t.sub_view_options)){var e=t.sub_view_options;t.sub_view_options=function(){return e}}this.__sub_view_options=t.sub_view_options;var i=this;this._sub_view_options&&(this.__sub_view_options=function(e){return BetaJS.Objs.extend(i._sub_view_options(e),t.sub_view_options(e))})}else this.__sub_view_options=this._sub_view_options;this._setOption(t,"selectable",!0),this._setOption(t,"multi_select",!1),this._setOption(t,"click_select",!0)},_addItem:function(t,e){var i=new this.__sub_view(BetaJS.Objs.extend({el:e,item:t},this.__sub_view_options(t)));this.itemData(t).view=i,this.addChild(i)},_destroyItemData:function(t){this.removeChild(t.view),t.view.destroy()},isSelected:function(t){return this.itemData(t).view.get("_selected")},select:function(t){if(this.itemData(t)){var e=this;return this.__selectable&&!this.isSelected(t)&&(this.__multi_select||this.collection().iterate(function(t){e.unselect(t)}),this.itemData(t).view.set("_selected",!0),this.trigger("select",t)),this.itemData(t).view}},unselect:function(t){return this.__selectable&&this.isSelected(t)&&(this.itemData(t).view.set("_selected",!1),this.trigger("unselect",t)),this.itemData(t).view}}),BetaJS.Views.View.extend("BetaJS.Views.OverlayView",{_templates:{"default":BetaJS.Templates.Cached["overlay-view-template"]},constructor:function(t){t=t||{},t.anchor=t.anchor||"absolute",t.hide_on_leave="hide_on_leave"in t?t.hide_on_leave:!0,t.visible="visible"in t?t.visible:!1,t.children_classes=t.children_classes||[],BetaJS.Types.is_string(t.children_classes)&&(t.children_classes=t.children_classes.split(" ")),t.children_classes.push("overlay-container-class"),this._inherited(BetaJS.Views.OverlayView,"constructor",t),this._setOption(t,"anchor","none"),this._setOption(t,"element",""),this._setOption(t,"overlay_left",0),this._setOption(t,"overlay_top",0),this._setOption(t,"overlay_align_vertical","top"),this._setOption(t,"overlay_align_horizontal","left"),this._setOption(t,"element_align_vertical","bottom"),this._setOption(t,"element_align_horizontal","left"),t.overlay_inner&&(t.overlay_inner.setEl('[data-selector="container"]'),this.overlay_inner=this.addChild(t.overlay_inner))},_after_show:function(){if("none"!=this.__anchor){var t=this.$(".overlay-container-class"),e=t.outerWidth(),i=t.outerHeight(),s=this.__overlay_left,n=this.__overlay_top;"bottom"==this.__overlay_align_vertical?n-=i:"center"==this.__overlay_align_vertical&&(n-=Math.round(i/2)),"right"==this.__overlay_align_horizontal?s-=e:"center"==this.__overlay_align_horizontal&&(s-=Math.round(e/2));var r=this.$el;"element"==this.__anchor&&this.__element&&(r=this.__element,BetaJS.Types.is_string(r)?r=BetaJS.$(r):BetaJS.Class.is_class_instance(r)&&(r=r.$el)),("relative"==this.__anchor||"element"==this.__anchor)&&(element_width=r.outerWidth(),element_height=r.outerHeight(),s+=r.offset().left-$(window).scrollLeft(),n+=r.offset().top-$(window).scrollTop(),"bottom"==this.__element_align_vertical?n+=element_height:"center"==this.__element_align_vertical&&(n+=Math.round(element_height/2)),"right"==this.__element_align_horizontal?s+=element_width:"center"==this.__element_align_horizontal&&(s+=Math.round(element_width/2))),t.css("left",s+"px"),t.css("top",n+"px")}}}),BetaJS.Views.View.extend("BetaJS.Views.FullscreenOverlayView",{_templates:{"default":BetaJS.Templates.Cached["fullscreen-overlay-view-template"]},_events:function(){return[{'click [data-selector="outer"]':function(){this.__destroy_on_unfocus?this.destroy():this.__hide_on_unfocus&&this.hide()}}]},constructor:function(t){t=t||{},t.el=t.el||"body",t.append_to_el="append_to_el"in t?t.append_to_el:!0,t.visible="visible"in t?t.visible:!1,this._inherited(BetaJS.Views.FullscreenOverlayView,"constructor",t),t.overlay_inner.setEl('[data-selector="inner"]'),this.overlay_inner=this.addChild(t.overlay_inner),this._setOption(t,"hide_on_unfocus",!0),this._setOption(t,"destroy_on_unfocus",!1)},_after_show:function(){var t=this.$('[data-selector="outer"]'),e=this.$('[data-selector="inner"]');e.removeClass("fullscreen-overlay-float"),e.removeClass("fullscreen-overlay-fit");var i=t.outerWidth(),s=t.outerHeight(),n=e.outerWidth(),r=e.outerHeight(),_=Math.floor((i-n)/2),o=Math.floor((s-r)/2);_>=0&&o>=0?(e.css("left",_+"px"),e.css("top",o+"px"),e.addClass("fullscreen-overlay-float")):(e.css("left","0px"),e.css("top","0px"),e.addClass("fullscreen-overlay-fit"))}});